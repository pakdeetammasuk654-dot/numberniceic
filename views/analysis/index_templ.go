// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package analysis

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"numberniceic/internal/core/domain"
	"strings"
)

type IndexProps struct {
	HeaderDisplayNameHTML []domain.DisplayChar // New field for header rendering
	Layout                LayoutProps
	DefaultName           string
	DefaultDay            string
	SampleNames           []domain.SampleName
	SolarSystem           SolarSystemProps
	IsVIP                 bool
	Results               templ.Component
	SolarSystemInitial    templ.Component // Added for lazy loading
}

func Index(props IndexProps) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<!-- Analyzer Form Container --> <div class=\"analyzer-container-premium\"><form id=\"name-form\"><!-- Hidden inputs --><input type=\"hidden\" name=\"auspicious\" id=\"main-auspicious\" value=\"false\"> <input type=\"hidden\" name=\"disable_klakini\" id=\"main-disable-klakini\" value=\"false\"><div class=\"form-group\"><div class=\"label-row\"><label for=\"name\">ชื่อ</label> <small class=\"helper-text\">วิเคราะห์อัตโนมัติเมื่อพิมพ์ชื่อ</small></div><div class=\"input-wrapper\"><span class=\"input-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\"></path> <circle cx=\"12\" cy=\"7\" r=\"4\"></circle></svg></span> <input type=\"text\" id=\"name\" name=\"name\" required placeholder=\"เช่น ปัญญา\" value=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var3 string
			templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(props.DefaultName)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `views/analysis/index.templ`, Line: 45, Col: 124}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "\" maxlength=\"30\" class=\"input-premium\" oninput=\"toggleClearButton()\" hx-get=\"/decode\" hx-target=\"#solar-system-wrapper\" hx-include=\"#name-form\" hx-trigger=\"input changed delay:500ms\" hx-indicator=\"#solar-loading, #results-wrapper\"> <span id=\"clear-btn\" class=\"clear-btn\" onclick=\"clearName()\">×</span></div></div><div class=\"form-group\"><label for=\"day\">วันเกิด</label><div class=\"input-wrapper\"><span class=\"input-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect width=\"18\" height=\"18\" x=\"3\" y=\"4\" rx=\"2\" ry=\"2\"></rect> <line x1=\"16\" x2=\"16\" y1=\"2\" y2=\"6\"></line> <line x1=\"8\" x2=\"8\" y1=\"2\" y2=\"6\"></line> <line x1=\"3\" x2=\"21\" y1=\"10\" y2=\"10\"></line></svg></span> <select id=\"day\" name=\"day\" required class=\"select-premium\" hx-get=\"/decode\" hx-target=\"#solar-system-wrapper\" hx-include=\"#name-form\" hx-trigger=\"change\" hx-indicator=\"#solar-loading, #results-wrapper\"><option value=\"SUNDAY\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.DefaultDay == "SUNDAY" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, " selected")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, ">วันอาทิตย์</option> <option value=\"MONDAY\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.DefaultDay == "MONDAY" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, " selected")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, ">วันจันทร์</option> <option value=\"TUESDAY\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.DefaultDay == "TUESDAY" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, " selected")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, ">วันอังคาร</option> <option value=\"WEDNESDAY1\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.DefaultDay == "WEDNESDAY1" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, " selected")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, ">วันพุธ (กลางวัน)</option> <option value=\"WEDNESDAY2\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.DefaultDay == "WEDNESDAY2" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, " selected")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, ">วันพุธ (กลางคืน)</option> <option value=\"THURSDAY\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.DefaultDay == "THURSDAY" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 13, " selected")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 14, ">วันพฤหัสบดี</option> <option value=\"FRIDAY\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.DefaultDay == "FRIDAY" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 15, " selected")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 16, ">วันศุกร์</option> <option value=\"SATURDAY\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.DefaultDay == "SATURDAY" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 17, " selected")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 18, ">วันเสาร์</option></select></div></div></form></div><!-- Sample Names Section --> <div class=\"sample-names-container\"><div class=\"avatars-grid\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			for _, sample := range props.SampleNames {
				var templ_7745c5c3_Var4 = []any{"avatar-premium", templ.KV("active", strings.TrimSpace(sample.Name) == strings.TrimSpace(props.DefaultName))}
				templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var4...)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 19, "<div class=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var5 string
				templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var4).String())
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `views/analysis/index.templ`, Line: 1, Col: 0}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 20, "\" data-name=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var6 string
				templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(strings.TrimSpace(sample.Name))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `views/analysis/index.templ`, Line: 88, Col: 48}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 21, "\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templ.RenderAttributes(ctx, templ_7745c5c3_Buffer, templ.Attributes{"onclick": "selectName('" + strings.TrimSpace(sample.Name) + "')"})
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 22, "><img src=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var7 string
				templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(sample.AvatarURL)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `views/analysis/index.templ`, Line: 90, Col: 33}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 23, "\" alt=\"Avatar\" class=\"avatar-img\"><div class=\"avatar-name\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var8 string
				templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(sample.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `views/analysis/index.templ`, Line: 91, Col: 44}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 24, "</div></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 25, "</div></div><!-- Results Section for initial load and as a target --> <div id=\"results-container\"><div class=\"result-container-relative\"><div id=\"solar-loading\" class=\"htmx-indicator loading-overlay\"><div class=\"loading-content\"><svg class=\"spinner\" width=\"35px\" height=\"35px\" viewBox=\"0 0 66 66\" xmlns=\"http://www.w3.org/2000/svg\"><circle class=\"path stroke-primary-important\" fill=\"none\" stroke-width=\"6\" stroke-linecap=\"round\" cx=\"33\" cy=\"33\" r=\"30\"></circle></svg> <span class=\"loading-text-lg\"><strong style=\"color: #f57f17; font-size: 1.2em;\">โปรดรอสักครู่</strong><br>กำลังวิเคราะห์จาก 3 แสนรายชื่อ....</span></div></div><div id=\"solar-system-wrapper\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if props.SolarSystemInitial != nil {
				templ_7745c5c3_Err = props.SolarSystemInitial.Render(ctx, templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = SolarSystem(props.SolarSystem).Render(ctx, templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 26, "</div></div><div id=\"results-wrapper\" class=\"htmx-indicator-container\"><!-- Table Loading Indicator (Skeleton) --><div id=\"table-loading\" class=\"htmx-indicator\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = Top4Skeleton().Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = Skeleton("similar-names-skeleton").Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 27, "</div><div id=\"results\"><!-- This is where the streaming data will be injected -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = props.Results.Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 28, "</div></div></div><!-- Back to Top Button --> <button id=\"back-to-top\" onclick=\"scrollToTop()\" title=\"Go to top\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M18 15l-6-6-6 6\"></path></svg></button><!-- JavaScript --> <script>\n\t\t\tfunction selectName(name) {\n\t\t\t\tconst nameInput = document.getElementById('name');\n\t\t\t\tnameInput.value = name;\n\t\t\t\ttoggleClearButton();\n\t\t\t\tupdateAvatarActive(name);\n\t\t\n\t\t\t\t// Manually trigger the input event on the input field itself\n\t\t\t\thtmx.trigger('#name', 'input');\n\t\t\n\t\t\t\t// Scroll to the top of the form for better UX\n\t\t\t\tconst form = document.getElementById('name-form');\n\t\t\t\tif (form) {\n\t\t\t\t\tform.scrollIntoView({ behavior: 'smooth', block: 'start' });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction updateAvatarActive(currentName) {\n\t\t\t\tconst avatars = document.querySelectorAll('.avatar-premium');\n\t\t\t\t// Normalize: remove whitespace\n\t\t\t\tconst clean = (str) => str ? str.trim().replace(/\\s+/g, '') : '';\n\t\t\t\tconst target = clean(currentName);\n\t\t\t\t\n\t\t\t\tavatars.forEach(avatar => {\n\t\t\t\t\tconst dataName = clean(avatar.getAttribute('data-name'));\n\t\t\t\t\t\n\t\t\t\t\t// Compare normalized values\n\t\t\t\t\tif (dataName === target && dataName.length > 0) {\n\t\t\t\t\t\tavatar.classList.add('active');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tavatar.classList.remove('active');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Update active avatar and clear button state on load\n\t\t\tdocument.addEventListener('DOMContentLoaded', function() {\n\t\t\t\tconst nameInput = document.getElementById('name');\n\t\t\t\tif (nameInput) {\n\t\t\t\t\ttoggleClearButton();\n\t\t\t\t\tupdateAvatarActive(nameInput.value);\n\t\t\t\t\tnameInput.addEventListener('input', function() {\n\t\t\t\t\t\tupdateAvatarActive(this.value);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\n\t\t\tfunction toggleClearButton() {\n\t\t\t\tconst nameInput = document.getElementById('name');\n\t\t\t\tconst clearBtn = document.getElementById('clear-btn');\n\t\t\t\tif (nameInput && nameInput.value.length > 0) {\n\t\t\t\t\tclearBtn.style.display = 'block';\n\t\t\t\t} else if (clearBtn) {\n\t\t\t\t\tclearBtn.style.display = 'none';\n\t\t\t\t}\n\t\t\t}\n\t\t\n\t\t\tfunction clearName() {\n\t\t\t\tconst nameInput = document.getElementById('name');\n\t\t\t\tnameInput.value = '';\n\t\t\t\ttoggleClearButton();\n\t\t\t\tnameInput.focus();\n\t\t\t\t// Manually trigger the input event to clear the results via HTMX\n\t\t\t\thtmx.trigger('#name', 'input');\n\t\t\t}\n\t\t\n\t\t\t// Back to Top functionality\n\t\t\tconst backToTopButton = document.getElementById(\"back-to-top\");\n\t\t\n\t\t\twindow.onscroll = function () {\n\t\t\t\tif (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {\n\t\t\t\t\tbackToTopButton.style.display = \"flex\";\n\t\t\t\t} else {\n\t\t\t\t\tbackToTopButton.style.display = \"none\";\n\t\t\t\t}\n\t\t\t};\n\t\t\n\t\t\tfunction scrollToTop() {\n\t\t\t\twindow.scrollTo({ top: 0, behavior: 'smooth' });\n\t\t\t}\n\t\t\n\t\t\tdocument.addEventListener('DOMContentLoaded', function () {\n\t\t\t\ttoggleClearButton();\n\t\t\t\t// Trigger initial load from the input field\n\t\t\t\t// htmx.trigger('#name', 'load'); // REMOVED: Managed by streaming\n\t\t\t});\n\t\t</script>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = Layout(props.Layout).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
